{% extends 'base.html' %}

{% load staticfiles %}

{% block styles %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'css/slick/slick.css' %}">
  <style type="text/css">
    .navbar {
      background: transparent;
      border: 0px;
    }
    .navbar-nav li {
      opacity: 0.5;
    }
    .navbar-nav li.active {
      border-bottom: 0px;
      opacity: 1;
    }
    .navbar-nav li a {
      color: #fff !important;
    }
    .navbar.white {
      background: white;
      border-bottom: 1px solid rgba(0, 0, 0, 0.15);
    }
    .navbar.white .navbar-nav li a {
      color: #503736 !important;
    }

    .jumbotron {
      background: #000;
      border-radius: 0px;
      display: flex;
      flex-direction: column;
      height: 120%;
      justify-content: center;
      margin-bottom: 0px;
      min-height: 100%;
      padding: 0px;
      text-align: center;
    }
    #homepageCarousel {
      height: 100%;
      opacity: 0.75;
    }
    .carousel-inner {
      z-index: -999;
    }
    .carousel-item img {
      object-fit: cover;
      opacity: 0.25;
    }
    .carousel-indicators li {
      background: #D5AE76;
      border-radius: 100%;
      height: 10px;
      opacity: 0.5;
      width: 10px;
    }
    .carousel-indicators li.active {
      background: #D5AE76;
      opacity: 1;
    }

    #headerContainer {
      position: absolute;
      width: 100%;
    }
    #headerText {
      color: #fff;
      font-size: 4rem;
    }
    #headerBtn {
      background: transparent;
      border: 2px solid #e0c58e;
      border-radius: 0px;
      font-size: 1rem;
    }

    .serviceText {
      background: #fff;
      display: flex;
      flex-direction: column;
      height: 100%;
      justify-content: center;
      min-height: 500px;
      padding: 100px;
      vertical-align: middle;
    }
    .serviceHeader {
      color: rgba(0, 0, 0, 0.8);
      font-size: 1.85rem;
      text-transform: uppercase;
    }
    .serviceHeaderDividerContainer {
      margin-top: 18px;
    }
    .serviceHeaderDivider {
      border-bottom: 1px solid #D5AE76;
      width: 280px;
    }
    .serviceHeaderSubdivider {
      border-bottom: 3px solid #D5AE76;
      margin-top: -2px;
      width: 25px;
    }
    .serviceDescription {
      color: rgba(0, 0, 0, 0.75);
      font-size: 1rem;
      margin: 24px 0 24px 0;
    }
    .serviceLink {
      color: #9EB0D0;
      text-decoration: underline;
    }
    .serviceLink:hover {
      color: #9EB0D0;
    }
    .serviceImage {
      height: 100%;
      min-height: 500px;
    }
    .serviceImage.first.odd,
    .serviceImage.second.even {
      display: none;
    }

    #testimonials {
      background: #536989;
    }
    #testimonials .serviceHeader {
      color: #fff;
      padding-top: 60px;
      text-align: center;
    }
    #testimonials .serviceHeaderDivider {
      margin: 0 auto;
    }
    #testimonials .serviceHeaderSubdivider {
      margin: 0 auto;
    }
    #testimonials .customer, #testimonials .text {
      color: #fff;
      text-align: center;
    }
    #testimonialSlider {
      margin: 0 auto;
      padding-bottom: 48px;
      padding-top: 48px;
      width: 80%;
    }
    .testimonial {
      height: 150px;
      padding-left: 12px;
      padding-right: 12px;
    }
    .slick-dots {
      list-style-type: none;
      padding: 0px;
      text-align: center;
    }
    .slick-dots li {
      display: inline-block;
    }
    .slick-dots button {
      background: #E0C58E;
      border: none;
      border-radius: 50%;
      text-indent: -9999px;
      margin: 4px;
      height: 12px;
      width: 4px;
    }
    .slick-dots li:not(.slick-active) button {
      opacity: 0.5;
    }

    #reserveBtnContainer {
      padding-bottom: 60px;
      text-align: center;
      width: 100%;
    }
    #reserveBtn {
      background: #E0C58E;
      border-radius: 50px;
      color: #fff;
      font-size: 1rem;
      padding-left: 60px;
      padding-right: 60px;
    }

    @media (max-width: 992px) {
      .navbar-nav li {
        opacity: 1;
      }
      .navbar-nav li a {
        color: #503736 !important;
      }
      #headerText {
        font-size: 2rem;
      }
      .carousel-item img {
        height: 100%;
      }
    }
    @media (max-width: 768px) {
      .serviceHeader {
        text-align: center;
      }
      .serviceHeaderDivider {
        margin: 0 auto;
        width: 90%;
      }
      .serviceHeaderSubdivider {
        margin: 0 auto;
      }
      .serviceDescription {
        text-align: center;
      }
      .serviceLink {
        text-align: center;
      }
      .serviceText {
        height: 400px;
        min-height: 400px;
      }
      .serviceImage {
        height: 400px;
        min-height: 400px;
      }
      .serviceImage.first {
        display: none !important;
      }
      .serviceImage.second {
        display: block !important;
      }
    }
  </style>
{% endblock %}

{% block outer_content %}
  <div id="outerContent">
    <div class="jumbotron">
      <div id="homepageCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          {% for slide in slides %}
            <li data-target="#homepageCarousel" data-slide-to="{{ forloop.counter0 }}" class="{% if forloop.first %}active{% endif %}"></li>
          {% endfor %}
        </ol>
        <div class="carousel-inner">
          {% for slide in slides %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
              <img class="d-block w-100" src="{{ slide.image.url }}">
            </div>
          {% endfor %}
        </div>
      </div>
      <div id="headerContainer">
        <h1 id="headerText" class="display-4 neutraBold">
          {{ config.HOMEPAGE_TITLE|linebreaksbr }}
        </h1>
        <p class="lead">
          <a id="headerBtn" class="btn btn-primary btn-lg neutraBold" href="{% url 'contact_form' %}" role="button">
            {{ config.HOMEPAGE_BUTTON }}
          </a>
        </p>
      </div>
    </div>
    <div id="portfolio" class="container-fluid">
      {% for service in portfolio %}
        <div class="service row">
          <div class="serviceImage col-lg-6 col-md-6 col-sm-12 first {% cycle 'odd' 'even' %}" style="background: url({{ service.main_image.url }}); background-size: cover; background-position: center;">
          </div>
          <div class="serviceText col-lg-6 col-md-6 col-sm-12">
            <div class="serviceHeaderContainer">
              <h2 class="serviceHeader neutraBold">{{ service.title }}</h2>
              <div class="serviceHeaderDividerContainer">
                <div class="serviceHeaderDivider"></div>
                <div class="serviceHeaderSubdivider"></div>
              </div>
            </div>
            <span class="serviceDescription neutra">
              {{ service.description }}
            </span>
            <a class="serviceLink neutra" href="{% url 'portfolio:portfolio-list' %}#{{ service.slug }}">
              View more
            </a>
          </div>
          <div class="serviceImage col-lg-6 col-md-6 col-sm-12 second {% cycle 'odd' 'even' %}" style="background: url({{ service.main_image.url }}); background-size: cover; background-position: center;">
          </div>
        </div>
      {% endfor %}
    </div>
    <div id="testimonials">
      <div class="serviceHeaderContainer">
        <h2 class="serviceHeader neutraBold">Testimonials</h2>
        <div class="serviceHeaderDividerContainer">
          <div class="serviceHeaderDivider"></div>
          <div class="serviceHeaderSubdivider"></div>
        </div>
      </div>
      <div id="testimonialSlider">
        {% for testimonial in testimonials %}
          <div class="testimonial">
            <p class="text neutra">"{{ testimonial.text }}"</p>
            <p class="customer neutraBold">- {{ testimonial.customer }}</p>
          </div>
        {% endfor %}
      </div>
      <div id="reserveBtnContainer">
        <a class="btn neutraBold" id="reserveBtn" href="{% url 'contact_form' %}">
          {{ config.RESERVE_BUTTON }}
        </a>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script src="{% static 'js/slick/slick.min.js' %}"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $("#testimonialSlider").slick({
        arrows: false,
        dots: true,
        slidesToShow: 3,
        slidesToScroll: 3,
        responsive: [
          {
            breakpoint: 992,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1,
            }
          },
        ]
      });

      $(window).scroll(function() {
        var scroll = $(window).scrollTop();
        var portfolioTop = $("#portfolio").offset().top - $(".navbar").height();

        if (scroll > portfolioTop) {
          $(".navbar").addClass('white');
        } else {
          $(".navbar").removeClass('white');
        }
      });
    });
  </script>
{% endblock %}
